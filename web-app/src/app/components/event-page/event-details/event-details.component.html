<div class="event-details">
  <mat-card *ngIf="appEvent">
    <div
      style="height: 25rem"
      leaflet
      [leafletOptions]="mapService.options"
      [(leafletCenter)]="mapService.map.center"
      [(leafletZoom)]="mapService.map.zoom"
      [leafletLayers]="[selectedEventMarker]"
    ></div>

    <mat-card-header>
      <mat-card-title>{{ appEvent.title }}</mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <div class="prop">
        <mat-icon inline="true">date_range</mat-icon>
        <span>
          {{ appEvent.startTime | date: "medium" }} - {{ appEvent.endTime | date: "medium" }}
        </span>
      </div>
      <div class="prop" *ngIf="appEvent?.visibilityText">
        <mat-icon inline="true">visibility</mat-icon>
        <span>{{ appEvent.visibilityText }}</span>
      </div>
      <div class="prop" *ngIf="!appEvent?.isLimitedDetails">
        <mat-icon inline="true">how_to_reg</mat-icon>

        <span>
          {{ appEvent.noParticipants }}
        </span>

        <span *ngIf="!appEvent?.isUnlimitedParticipants">/ {{ appEvent.noMaxParticipants }}</span>
      </div>
      <div class="prop" *ngIf="!appEvent?.isLimitedDetails">
        <mat-icon inline="true">location_on</mat-icon>
        <span>{{ appEvent.location }}</span>
      </div>
      <div class="prop">
        <mat-icon inline="true">category</mat-icon>
        <span>{{ appEvent.categoryText }}</span>
      </div>

      <div class="card-bottom">
        <div class="left-side">
          {{ appEvent.description }}
        </div>
        <div *ngIf="!invitation && isLoggedIn" class="rigth-side">
          <button (click)="joinEvent()" color="primary" mat-raised-button>Join event</button>
        </div>
      </div>
    </mat-card-content>
    <mat-card-actions *ngIf="!isOwner">
      <mat-chip-list class="right-side" *ngIf="invitation">
        <mat-chip *ngIf="invitation.statusText === 'pending'" class="yellow-chip">
          <mat-icon>pending</mat-icon>
          {{ invitation.statusText }}
        </mat-chip>
        <mat-chip *ngIf="invitation.statusText === 'accepted'" class="green-chip">
          <mat-icon>check_circle</mat-icon>
          {{ invitation.statusText }}
        </mat-chip>
        <mat-chip *ngIf="invitation.statusText === 'denied'" class="red-chip">
          <mat-icon>cancel</mat-icon>
          {{ invitation.statusText }}
        </mat-chip>
        <mat-chip *ngIf="invitation.attendStatusText === 'unchecked'" class="yellow-chip">
          <mat-icon>pending</mat-icon>
          {{ invitation.attendStatusText }}
        </mat-chip>
        <mat-chip *ngIf="invitation.attendStatusText === 'attended'" class="green-chip">
          <mat-icon>check_circle</mat-icon>
          {{ invitation.attendStatusText }}
        </mat-chip>
        <mat-chip *ngIf="invitation.attendStatusText === 'missed'" class="red-chip">
          <mat-icon>cancel</mat-icon>
          {{ invitation.attendStatusText }}
        </mat-chip>
      </mat-chip-list>
    </mat-card-actions>
  </mat-card>
</div>
