<h2 mat-dialog-title>Create an event</h2>

<mat-dialog-content>
  <div>
    <form [formGroup]="eventForm" (ngSubmit)="onSubmit()">
      <mat-form-field class="full-width">
        <mat-label>Title</mat-label>
        <input #titleInput matInput type="text" formControlName="title" />
      </mat-form-field>

      <mat-form-field class="full-width">
        <mat-label>Location</mat-label>
        <input #locationInput matInput type="text" formControlName="location" />
      </mat-form-field>

      <div
        class="map"
        leaflet
        [leafletOptions]="locationPickerOptions"
        [(leafletCenter)]="mapCenter"
        (leafletMapReady)="onMapReady($event)"
      ></div>

      <div class="double-field-container">
        <mat-form-field class="full-width">
          <mat-label>Coords x </mat-label>
          <input matInput type="number" formControlName="x" />
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label>Coords y </mat-label>
          <input matInput type="number" formControlName="y" />
        </mat-form-field>
      </div>

      <div class="double-field-container">
        <mat-form-field class="full-width">
          <mat-label>Start date</mat-label>
          <input
            #startDateInput
            matInput
            [matDatepicker]="startDatePicker"
            formControlName="startDate"
          />
          <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #startDatePicker></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label>End date</mat-label>
          <input #endDateInput matInput [matDatepicker]="endDatePicker" formControlName="endDate" />
          <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #endDatePicker></mat-datepicker>
        </mat-form-field>
      </div>
      
      <div class="double-field-container">
        <mat-form-field class="full-width">
          <mat-label>Start time</mat-label>
          <input matInput type="time" value="12:00 AM" formControlName="startTime" />
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label>End time</mat-label>
          <input matInput type="time" value="12:00 AM" formControlName="endTime" />
        </mat-form-field>
      </div>

      <div class="double-field-container">
        <mat-form-field class="full-width">
          <mat-label>Visibility</mat-label>
          <mat-select #visibilityInput formControlName="visibility">
            <mat-option value="public">Public</mat-option>
            <mat-option value="whitelisted">Whitelisted</mat-option>
            <mat-option value="unlisted">Unlisted</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label>Category</mat-label>
          <mat-select #categoryInput formControlName="category">
            <mat-option *ngFor="let category of categories" [value]="category.value">
              {{ category.viewValue }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <mat-form-field class="full-width">
        <mat-label>Minimum Trust level</mat-label>
        <mat-select #categoryInput formControlName="trustLevel">
          <mat-option
            *ngFor="let trustLevelOption of trustLevelOptions"
            [value]="trustLevelOption.value"
          >
            {{ trustLevelOption.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-checkbox color="primary" class="full-width" (change)="onChangeMaxNrParticipants()">
        <mat-label>Max nr of participants</mat-label>
      </mat-checkbox>

      <mat-form-field class="full-width" *ngIf="show">
        <mat-label>Max participants</mat-label>
        <input matInput type="number" formControlName="nrMaxParticipants" />
      </mat-form-field>

      <mat-form-field class="full-width">
        <mat-label>Description</mat-label>
        <textarea matInput formControlName="textarea"></textarea>
      </mat-form-field>

      <button [disabled]="!eventForm.valid" type="submit" mat-raised-button color="primary">
        Submit
      </button>
    </form>
  </div>
</mat-dialog-content>